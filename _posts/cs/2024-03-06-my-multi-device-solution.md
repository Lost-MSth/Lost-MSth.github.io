---
modify_date: "2024-03-06 23:00:00"
title: 个人多设备使用解决方案
key: my_multi_device_solution
tags: ["Resilio Sync", "ZeroTier"]
aside:
    toc: true
---

## 前言

本文旨在记录本人在多个设备和平台之间愉快使用的经验和选择，为后人提供一些参考，当然，这些选择都不是唯一的也不一定是最好的，如有更好的建议，欢迎建言献策

首先要说明的是我所使用的设备和环境：

1. 办公室常开电脑
   1. Windows 11 专业版
   2. 处在伪公网中，有基本固定的 IPv4 地址，IPv6 可用，外部无法直接访问，使用学校 VPN 才行
   3. 上传下载带宽对等，千兆网
   4. 性能强劲
   5. 已经设置好了断电后来电自启、定时自启，一般不会停机但是会自动重启
2. 宿舍用的轻薄游戏笔记本
   1. Windows 11 企业版 Beta 频道，是的，会追最新可用预览版本
   2. 宿舍不是指学校宿舍，不在学校内网中，是家宽，显然不可能有公网，甚至因为路由器不在我手里，连 IPv6 都不可用
   3. 在宿舍带宽不大，甚至网不稳
   4. 装有众多资料和鬼知道用不用的到的奇奇怪怪软件的老电脑，也是目前用的最舒服的
   5. 放假会带回家，每天会关机
3. 到处带的轻薄笔记本
   1. Windows 11 家庭版
   2. AMD 核显本，续航很强
   3. 网络环境多变，在校内，好几个楼的免费 WiFi 是有问题的（只有 IPv6 可用）
   4. 没太大存储空间，但是因为经常带，所以需要资料能实时同步
4. 天天看的手机以及平板
   1. 都是 HarmonyOS 4
   2. 其实并不常常用来看资料，但是可能会 RDP 到电脑，或者 SSH 到服务器
5. 可能会用到的云服务器
   1. 一般是 Linux
   2. 肯定有公网 IPv4，但是带宽小
   3. 目前是流量计费和 CPU 弹性积分，这导致机器用途不是很大了，以后谁知道我会不会换呢，所以略

可以看到，办公室电脑对比云服务器，拥有相当奢华的配置，可惜就是外部访问较为麻烦，所以先要搞定的是网络问题，其次就是设备之间的文件同步，再干什么就随便啦

## 网络

### ZeroTier

这是非常著名的虚拟局域网软件，上[官网](www.zerotier.com)注册账号，免费用户应该可以最多添加 25 个节点，完全够用了，登录控制台然后创建 Network，设置中可以改一个好记的 IPv4 内网地址范围，比如这里我选的是 `172.25.*.*`

然后到[下载页面](https://www.zerotier.com/download/)去下指定平台的客户端就好了，以 Windows 平台为例，在第一次启动时会在任务栏托盘处有个图标，注意这是个前端 UI，服务与它不挂钩，你把它退出也是没有问题的

Win+X 打开“终端管理员”或者“命令提示符（管理员）”，ZeroTier 是命令行操控的，基本命令 `zerotier-cli`，常用的有

```bash
# Leaf 是用户设备，Planet 是官方的发现和中转服务器（可以自建），Moon 是用户自建中转服务器
zerotier-cli peers  # 查看当前局域网内 Leaf、Planet 和 Moon 的连接情况
zerotier-cli listpeers  # 基本同上
zerotier-cli join <network ID>  # 加入某个局域网
```

命令行或者 UI 加入之前创建的网络，注意在官网控制台中的 Members 里的变化，可以看到新的设备了，可以选择先在 Managed IPs 中设置一个固定 IP，然后需要将最前面 Auth? 的多选框的钩打上，这时设备就算是真正加入网络了，最后最好再记得给新设备写个注释

按理说这玩意是开机自启的，因为它注册成了一个服务，在任务管理器的服务中可以看到它在运行（再说一遍不用担心任务栏托盘中没有图标）

> ZeroTier 有的时候是不稳定的，因为墙等各种原因，所以可以自建 Planet 服务器，中转 Moon 一般是设备无法顺畅连接时使用的中继
>
> 在我的环境中，不稳的时候，挂个学校 VPN 就好了，要是还不行那就是学校出口设备出问题了

## 文件同步

### Resilio Sync

[官方网站](https://www.resilio.com/individuals/)，呃，可以用来下载，然后就没有什么用了，APK 需要到 Google Play 上下载，挂个梯子不丢人的（

软件的使用是非常简单的，~~小学生都会~~，注意第一次打开需要设定此设备的唯一名称，便于分辨，之后选择你要跨设备同步的文件夹添加进来就好，然后记得在别的设备上安装好，在设置的“身份”中“链接设备”就行，开机自启应该不会忘了弄

我似乎没有看到网上有破解版本，只有一堆似乎一样的授权文件，我用了，可以解锁 Pro，但是不完美，在几天后会自动变回来说“许可证管理已停用 32799”，而且在变回来之前的一段时间会大量占用 CPU 资源，以及有疯狂的日志写入操作

我不知道这是什么问题，我试过屏蔽其官方网站和许可证服务器的连接，但并没有用，甚至没网它都会这个样子，所以我的办法是：我自己来破解不就好了

先说说为什么要破解吧，在 Windows 上，如果你不是 Pro 版本或者试用的话，文件夹是无法**选择性同步**的，这意味着你在所有同步这个文件夹的设备上都需要完整同步所有文件，而选择性同步是用一个空文件来占位，这将大大节约空间，起码我认为这是非常必要的功能（在手机上这个功能是免费的，草）

其实我也不记得我怎么破的了，我改过好几次来看效果，我觉得关键点在于 License 相关的内部 API，就是有字符串 `LF[%O]: LicenseFolder::IsActive(%s): return FALSE, license expired e: %u c: %u` 的被调用的内个函数，这个字符串应该是要直接搜 hex bytes 的（每个字符都用 `0x00` 间隔）

## 番剧相关

### AutoBangumi

### Jellyfin

### Nginx

### qBittorrent

> In building...
